
### P2732 商店购物 Shopping Offers

算法标签: **动态规划,动规,dp**, **背包**
其他标签: **USACO**

#### Description


#### Analysis

这一题是完全背包问题。不过题目非常绕，不容易看出来。

题目给出以下几种信息：

1. 需要购买的商品种类，和每种商品的数量，每种商品的原价。
2. 优惠组合装： 哪几件商品一起买，可以优惠。优惠价是多少。

一种最直接的思路就是：给定每种商品的数量，可以通过哪些捆绑 + 零售组合得到？

进一步问：给定每种商品的数量，使用哪种组合方式，可以使得购买价格最低？

类似的完全背包问题有： 给定 $n$ 种货币， 使用哪种方式组成一种价值所用的货币数量最少？ 等等。


这道题目有最多5种商品，并且每种商品的购买数量不会超过5个。 开始我以为这数据真小。后来发现其实一点也不小。

5种商品购买数量虽然不超过5个，但总状态数是 $6^5 = 7776$ 个。 可以开一个 5维数组，也可以用压缩状态。 这里我选择压缩状态为一个数，这样就能用一维的 DP了。

然后再看一种捆绑，如果一个状态 $k = a_0 6^0 + a_1 6^1 + a_2 6^2 + a_3 6^3 + a_4 6^4 + a_5 6^5$ 表示， 那么一种捆绑组合也可以用 $ds = c_0 6^0 + c_1 6^1 + c_2 6^2 + c_3 6^3 + c_4 6^4 + c_5 6^5$ 表示。

但是一个限定条件是 $c_i \leq a_i$。在使用的时候需要判定，否则会产生借位。。。这是用状压的一个非常大的缺陷。 如果用 5 维数组，从捆绑组合的 $c_i$ 开始遍历作为起点遍历就可以了。

状态方程是：

$dp(n, k) = \min(dp(n - 1, k), dp(n, k - ds_n))$

$dp(n, k)$ 表示使用 $n$ 个优惠组合， 在状态 $k$ 时候的所需的最低价格。

#### [Code](../../cpp/27/p2732.cpp)


