
### P2730 魔板 Magic Squares

算法标签: **搜索** **排列组合** **广度优先搜索**
其他标签: **IOI**, **USACO**

#### Description


#### Analysis

这一题实际上是广搜的基本题。 但是难点在于排列到自然数的双射，实际上就是 Cantor Expansion 的概念。

一开始我试图用限定深度的 DFS 求解，发现没办法标记访问点，对所有状态点标记不出来，因此时间复杂度还是很高的。（或许可以用 `map` 标记深度，可以尝试一下）

然后老老实实学习 Cantor Expansion。 搞定以下两个转换：

1. 排列到序号的映射
2. 序号到排列的映射

在队列中，我只处理序号，因为方便。

对于各种操作 A、B、C， 先将序号转成排列，然后再对排列操作，再将排列后的操作转成序号。

这是在搜索过程中进行的，稍微有点浪费时间。(一种想法是在初始化的时候就把所有操作映射记录下来。这样避免在搜索中操作了。)

在搜索过程中，还要记录两个： 一个是前驱数组： 记录每一个点的前驱是什么； 一个是操作数组： 记录从上一个点到这个点用了哪种操作。


#### [Code](../../cpp/27/p2730.cpp)


