### P2719 搞笑世界杯

算法标签: **动态规划,动规,dp**, **概率**


#### Description

有两种票， A 和 B 各 $n$ 张。

售票员通过抛硬币的方式决定卖那种票， 正面卖 A 票， 反面卖 B 票。 当然如果只剩下一种票就只卖那种票。

现在的问题的是问最后两张票是相同票的概率是多少。

#### Analysis

最烦这种概率题了，一直没学好概率。。。。。

现在有  AABB 4张票， 则售票员通过抛硬币决定卖那张票，卖 A的概率是 0.5， 剩下 ABB 3张票； 卖B的概率是 0.5， 剩下 AAB两张票。

所以其实很简单。。令 $P(i, j)$ 为剩余 $i$ 张A票和 $j$ 张 B票时最后两张票相同的概率， 则有 $P(i, j) = 0.5 P(i - 1, j) + 0.5P(i, j - 1)$

还有注意一些边界条件：

- $P(0, 0) = P(0, 1) = P(1, 0) = 0.0$
- $P(i, 0) = P(0, j) = 1.0,  2 \leq i, j \leq n$

其余情况根据动规方程递推就行了。

```cpp
#define MAX_N 1251

int main()
{
    int n, i, j;
    scanf("%d", &n);
    n >>= 1;
    double dp[MAX_N];

    dp[0] = dp[1] = 0.0; // P(0) = P(B) = 0.0
    for (i = 2; i <= n; ++i)
        dp[i] = 1; // P(BBBB..) = 1

    for (i = 1; i <= n; ++i)
    {
        dp[0] = (i > 1);    // P(AB) = 0.0
        for (j = 1; j <= n; ++j)
            dp[j] = (dp[j - 1] + dp[j]) * 0.5;
    }
    printf("%.4lf", dp[n]);
    return 0;
}
```


#### [Code](../cpp/p2719.cpp) 

