### P1023 税收与补贴问题

算法标签: **数论,数学**, **枚举,暴力**
其他标签: **NOIp提高组**, **2000**


#### Description

#### Analysis

这一题是一道综合题。没有特别难的算法， 主要考察综合处理问题、掌控细节的能力。

如果要算知识点，主要考察 **极值** 和 **插值** 的概念。

题目给出在产品在某些价位上的销售量，以及递减规律。（价格上升、销量下降，是一般规律）。

政府会有一个预期价格（宏观调控）。政府希望在预期价位上，企业的收益最大化， 因此采取一些 补贴/收税 策略（改变利润）。补贴，就是增加企业利润； 收税就是降低企业利润。

题目问： 使用多少 补贴/收税 可以使得企业在预期价位上的收益最大。

这道题隐含着很多问题，包括数学问题和编程问题，都需要解决，下面是两个关键问题：

1. 关键问题： 什么是收益最大化？ 政府给每个产品补贴 1亿RMB， 哪怕卖出去 1个，我也赚死了。 所以不是补贴越大越好。 这道题问的其实是 **极值**。 在预期的价格上， 收益相比于其他价格收益最大。所以即使补贴 1亿RMB，让你卖 3块钱， 你发现在卖 10块钱收益更大， 那你肯定选择卖 10块钱。在政府起不到调控作用情况下，补贴取消， 1毛钱都没有。 让你丫卖10块！

2. 销售量值的 **插值** 问题： 输入并没有给出全部销售量，只是给出了一些 售价-销售量 的点，在这些点之间是线性的， 在最大值之后，有一个每单位价格递减的销售量的系数。


关于收益的极值，

首先，利润是售价的线性函数 $ f(price) = price - cost $， 这是递增函数；

其次，销售量也是 售价的分段线性函数 $ g(price) = - a * price + b $， 是递减的函数。 可以写一个函数，专门计算这个值。这解决了 **插值** 的问题。

二者相乘是一个 **分段** 二次函数。 虽然是分段的，但是极值还是有的。在 $f$ 严格递增， $g$ 严格递减的情况下，是有最大值的。

逐渐化成一些小问题。

1. 如何判断在某个确定价位上， $f * g$ 最大？

2. $f(price)$ 是变化的，实际的函数为 $f(price) = price - cost + bonus$ ， bonus 是补贴。 **bonus 的取值范围？**


第一个观点（分段二次函数上没有严格证明）：

在（分段）二次函数上某个点上判断是否极值，只需要与相邻点比较即可。

如果比两边的都大，则是极值； 否则就不是。

第二个观点：

如果在三个连续价位上，收益是下降的（二次曲线的右半部），那么提高 bonus（提高 $f$) 值，并不会改变这个情况。

为什么？ 利润增加相同的情况下，卖的越少自然越亏了。


这就解决了之前的问题：

1. 只需要 三个点 $ep -1, ep, ep + 1$ 计算收益，就可以判断是否极值。
2. 从 利润为 0,1,2 开始循环（反向计算bonus）计算三个点的收益大小。如果在这三个点上，收益都是下降的，就可以 break 循环了。

在循环过程中，找出 bonus绝对值最小的， 收益最大的。 如果没有，则没有解。


#### [Code](../cpp/p1023.cpp)
