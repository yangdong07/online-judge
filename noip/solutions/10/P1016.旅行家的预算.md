
### P1016 旅行家的预算

算法标签: **贪心**, **递归**
其他标签: **NOIp提高组**, **1999**

#### Description

一个旅行家想驾驶汽车以最少的费用从一个城市 A 到另一个城市 B。

有以下条件：

1. 城市之间有 $N$ 个加油站，每个加油站到城市 A 的距离为 $D_i$，油价每升 $P_i$
2. 城市 A 的油价 为每升 $P_0$， 可以理解 $D_0 = 0$。
3. 两个城市之间的距离为 $D_{n+1}$。
4. 汽车油箱容量为 $C$， 每升汽油能行使的距离为 $d$

假设出发时油箱是空的（需要先在城市A 加点油）。 问最少可以用多少费用可以从 A 旅行到 B。

#### Analysis

这题不知道正解是什么，也没有什么特别的算法。

但是有一个很巧妙的思路可以解决这个问题：可以将不同价位的油分割开来思考，

1. 每次在加油站都加满油
2. 每次旅行都先消耗最低费用的油
3. 如果在一个加油站发现此处油价比油箱中的 “某些“ 油便宜，将油箱中的贵的油都 “退掉”，然后用便宜的汽油加满。
4. 在最后把油箱中所有油都退掉（这里可以认为最后一个城市的 $P_{n+1} = 0$，比所有油都便宜）。
5. 总的消费就是 加满油的花费 - 退掉的油的花费。

另外注意：因为在每个加油站都加满了油，满箱油可以跑的距离为 $Cd$，如果加油站之间距离超过这个数字，那么就不能旅行到终点。

这样思路就非常清晰。并且只需要维护一个大小为 $N$ 的数组，表示各种价位的油在油箱中的百分比。每到一个加油站更新一次：

1. 先依次消耗掉低价油，直到能够达到这个加油站。
2. 然后再加满油。如果此处油价比前面的油价高，则退掉那部分油，换成低价油。

通过第2条可以保证：这个数组中的百分比大于0的子序列，其油价都是严格递增的。所以在第1条中，可以放心从数组正序开始消耗掉低价油。

#### [Code](../../cpp/10/p1016.cpp)


